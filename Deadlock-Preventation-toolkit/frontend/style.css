:root{
  --bg:#020617;
  --card:#020617;
  --muted:#9ca3af;
  --border:#1f2937;
  --danger:#ef4444;
  --success:#22c55e;
  --text:#e5e7eb;
}

*{
  box-sizing:border-box;
  font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
}

html,body{
  height:100%;
  margin:0;
  background:radial-gradient(circle at top left,#020617,#020617 45%,#020617 100%);
  color:var(--text);
}

/* header */

.page-header{
  padding-top:18px;
}

.page-header-inner{
  max-width:1200px;
  margin:0 auto 4px;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  height:52px;
}

.page-title{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  margin:0;
  font-size:23px;
  text-align:center;
  white-space:nowrap;
  background:linear-gradient(120deg,#38bdf8,#6366f1,#a855f7);
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

.logo-circle{
  width:42px;
  height:42px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 20%,#38bdf8,#6366f1 55%,#0f172a 100%);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 4px 14px rgba(37,99,235,0.7);
}

.logo-letter{
  font-size:20px;
  color:#f9fafb;
}

/* dashboard layout */

.dashboard{
  max-width:1200px;
  margin:8px auto 26px;
  padding:14px 20px 22px;
  display:grid;
  grid-template-columns:1.1fr 1.1fr;
  grid-template-rows:auto auto auto auto;
  gap:14px;
}

.panel{
  background:linear-gradient(145deg,#020617,#020617 60%,#020617 100%);
  border-radius:18px;
  padding:14px 16px;
  border:1px solid rgba(31,41,55,0.9);
  box-shadow:0 18px 45px rgba(15,23,42,0.8);
}

.controls{ grid-column:1 / 2; grid-row:1 / 2; }
.rag{ grid-column:2 / 3; grid-row:1 / 4; }
.matrices{ grid-column:1 / 2; grid-row:2 / 3; }
.log{ grid-column:1 / 2; grid-row:4 / 5; }
.flow{ grid-column:2 / 3; grid-row:4 / 5; }

.panel-title{
  font-size:15px;
  font-weight:600;
  margin-bottom:6px;
}

.panel-subtitle{
  font-size:12px;
  color:var(--muted);
}

.small-sub{
  margin-top:2px;
}

/* controls */

.controls-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
  align-items:flex-end;
}

.field label{
  display:block;
  font-size:12px;
  color:var(--muted);
  margin-bottom:4px;
}

input[type=number],
input[type=text]{
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid #111827;
  background:#020617;
  color:var(--text);
  font-size:13px;
  outline:none;
}

input:focus{
  border-color:#38bdf8;
}

.controls-buttons{
  display:flex;
  gap:8px;
  grid-column:1 / 3;
}

/* buttons */

.btn{
  border:none;
  border-radius:12px;
  padding:10px 14px;
  font-size:14px;
  cursor:pointer;
  font-weight:600;
  width:100%;
  transition:0.2s;
}

.btn.primary{
  background:radial-gradient(circle at 30% 20%,#a855f7,#6366f1 55%,#38bdf8 100%);
  color:#020617;
}

.btn.ghost{
  background:transparent;
  border:1px solid rgba(255,255,255,0.08);
  color:var(--muted);
}

.btn.primary:hover{
  background:#00b8e6;
  transform:scale(1.03);
}

.btn.ghost:hover{
  border-color:#38bdf8;
}

/* matrices */

.matrices-top{
  display:flex;
  gap:18px;
  margin-bottom:10px;
}

.matrix-block{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:4px;
}

.matrix-title{
  font-size:13px;
  font-weight:600;
}

.matrix-grid{
  display:grid;
  gap:6px;
  background:#020617;
  padding:8px;
  border-radius:10px;
  border:1px solid #111827;
}

.avail-block{
  margin-top:4px;
  display:flex;
  flex-direction:column;
  gap:4px;
}

.avail-grid{
  display:flex;
  gap:6px;
  background:#020617;
  padding:8px;
  border-radius:10px;
  border:1px solid #111827;
}

.matrix-cell,
.avail-cell{
  width:46px;
  height:32px;
  border-radius:6px;
  border:1px solid #111827;
  background:#020617;
  color:#f9fafb;
  font-size:15px;
  line-height:30px;
  text-align:center;
  outline:none;
}

.matrix-cell:focus,
.avail-cell:focus{
  border-color:#38bdf8;
}

/* RAG + inline results */

.rag-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:16px;
}

.rag-results{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:12px;
}

.rag-result-line{
  display:flex;
  align-items:center;
  gap:6px;
}

.rag-label{
  color:var(--muted);
}

.pill{
  padding:3px 10px;
  border-radius:999px;
  font-size:11px;
  border:1px solid transparent;
}

.pill-ok{
  background:rgba(22,163,74,0.15);
  color:#4ade80;
  border-color:rgba(34,197,94,0.4);
}

.pill-bad{
  background:rgba(239,68,68,0.15);
  color:#fecaca;
  border-color:rgba(248,113,113,0.5);
}

.pill-neutral{
  background:rgba(148,163,184,0.1);
  color:#e5e7eb;
  border-color:rgba(148,163,184,0.35);
}

.rag-text{
  margin-top:6px;
  margin-bottom:6px;
  font-size:12px;
  color:var(--muted);
}

/* graph */

.graph-wrap{
  width:100%;
  height:360px;
  border-radius:14px;
  border:1px solid #111827;
  background:radial-gradient(circle at top,#020617,#020617 70%,#020617 100%);
  overflow:hidden;
  margin-top:4px;
}

svg{
  width:100%;
  height:100%;
}

.nodeProc{
  fill:#020617;
  stroke:#38bdf8;
  stroke-width:1.6;
}

.nodeRes{
  fill:#020617;
  stroke:#facc15;
  stroke-width:1.6;
}

.textNode{
  fill:#e5e7eb;
  font-size:12px;
  font-weight:600;
}

.edgeAlloc{
  stroke:#22c55e;
  stroke-width:1.5;
  marker-end:url(#arrowAlloc);
}

.edgeNeed{
  stroke:#fb7185;
  stroke-width:1.5;
  marker-end:url(#arrowNeed);
}

/* log */

.event-log{
  margin-top:4px;
  height:150px;
  border-radius:10px;
  border:1px solid #111827;
  background:#020617;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
  font-size:12px;
  padding:8px 10px;
  overflow-y:auto;
  white-space:pre-wrap;
}

/* flow */

.flow-diagram{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
}

.flow-node{
  padding:6px 14px;
  border-radius:999px;
  border:1px solid #1f2937;
  background:#020617;
  font-size:12px;
}

.flow-arrow{
  font-size:16px;
  color:var(--muted);
}

/* responsive */

@media (max-width:980px){
  .dashboard{
    grid-template-columns:1fr;
    grid-template-rows:auto;
  }
  .controls,
  .rag,
  .matrices,
  .log,
  .flow{
    grid-column:1 / 2;
    grid-row:auto;
  }
}
